(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[778],{6379:function(e,t,i){Promise.resolve().then(i.bind(i,91938))},91938:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return j}});var n=i(57437),l=i(763),a=i(46853),s=i(20773),o=i(64917),r=i(97231),c=i(94093),d=i(53255),u=i(78864),h=i(40468),x=i(80511),m=i(32529),g=i(2265);function j(){let e=(0,g.useMemo)(()=>(0,u.o)(),[]),t=(0,g.useMemo)(()=>e.getClubAthleteAdminContactService(),[]),[i,j]=(0,g.useState)(!1),[b,Z]=(0,g.useState)(null),[f,v]=(0,g.useState)([]),[p,C]=(0,g.useState)(null),[S,A]=(0,g.useState)(!1),[k,I]=(0,g.useState)(!1),[y,R]=(0,g.useState)(!1),[T,O]=(0,g.useState)(!1),[D,w]=(0,g.useState)(!1),[E,N]=(0,g.useState)(!1),[F,M]=(0,g.useState)(!1);(0,g.useEffect)(()=>{j(!0),t.getContactRequests().then(e=>{(0,d.X)(e),v(e)}).catch(e=>{Z(e.message)}).finally(()=>{j(!1)})},[]);let B=e=>{w(!0),t.markAsInReview(e).then(()=>{let t=[...f];for(let i=0;i<t.length;i++)if(t[i].atleta.id===e.atleta.id&&t[i].club.id===e.club.id){t[i].estadoMasReciente={estado:"EN_REVISION",fecha:new Date};break}v(t),N(!0)}).catch(e=>{Z(e.message)}).finally(()=>{A(!1),w(!1)})},P=e=>{w(!0),t.markAsRejected(e).then(()=>{let t=[...f];for(let i=0;i<t.length;i++)if(t[i].atleta.id===e.atleta.id&&t[i].club.id===e.club.id){t[i].estadoMasReciente={estado:"RECHAZADO",fecha:new Date};break}v(t),N(!0)}).catch(e=>{Z(e.message)}).finally(()=>{I(!1),w(!1)})},_=e=>{w(!0),t.markAsApproved(e).then(()=>{let t=[...f];for(let i=0;i<t.length;i++)if(t[i].atleta.id===e.atleta.id&&t[i].club.id===e.club.id){t[i].estadoMasReciente={estado:"APROBADO",fecha:new Date};break}v(t),N(!0)}).catch(e=>{Z(e.message)}).finally(()=>{R(!1),w(!1)})},V=e=>{w(!0),t.dismiss(e).then(()=>{v(f.filter(t=>!(t.atleta.id===e.atleta.id&&t.club.id===e.club.id))),M(!0)}).catch(e=>{Z(e.message)}).finally(()=>{O(!1),w(!1)})};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(c.Z,{}),(0,n.jsx)("h1",{style:{textAlign:"center"},children:"Solicitudes de Contacto"}),i&&(0,n.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:(0,n.jsx)(h.Z,{})}),null!==b&&(0,n.jsx)(a.Z,{message:b,onClose:()=>Z(null)}),0===f.length&&(0,n.jsx)(x.Z,{sx:{textAlign:"center"},children:"No hay solicitudes"}),(0,n.jsx)(m.Z,{gap:5,justifyContent:"center",alignItems:"center",children:f.map(e=>(0,n.jsx)(r.Z,{solicitud:e,club:e.club,onReview:()=>{C(e),A(!0)},onReject:()=>{C(e),I(!0)},onAccept:()=>{C(e),R(!0)},onDismiss:()=>{C(e),O(!0)}}))}),S&&(0,n.jsx)(l.Z,{message:"\xbfSeguro que desea cambiar el estado de la solicitud del atleta '"+(null==p?void 0:p.atleta.nombre)+" "+(null==p?void 0:p.atleta.apellido)+"' a en revisi\xf3n?",onClickedNo:()=>A(!1),onClickedOk:()=>B(p),onClose:()=>A(!1)}),k&&(0,n.jsx)(l.Z,{message:"\xbfSeguro que desea cambiar el estado de la solicitud del atleta '"+(null==p?void 0:p.atleta.nombre)+" "+(null==p?void 0:p.atleta.apellido)+"' a en rechazada?",onClickedNo:()=>I(!1),onClickedOk:()=>P(p),onClose:()=>I(!1)}),y&&(0,n.jsx)(l.Z,{message:"\xbfSeguro que desea cambiar el estado de la solicitud del atleta '"+(null==p?void 0:p.atleta.nombre)+" "+(null==p?void 0:p.atleta.apellido)+"' a en aceptada?",onClickedNo:()=>R(!1),onClickedOk:()=>_(p),onClose:()=>R(!1)}),T&&(0,n.jsx)(l.Z,{message:"\xbfSeguro que desea descartar la solicitud del atleta '"+(null==p?void 0:p.atleta.nombre)+" "+(null==p?void 0:p.atleta.apellido)+"'?",onClickedNo:()=>O(!1),onClickedOk:()=>V(p),onClose:()=>O(!1)}),D&&(0,n.jsx)(o.Z,{message:"Cargando cambio de estado",isLoading:D,onClose:()=>w(!1)}),E&&(0,n.jsx)(s.Z,{message:"El estado de la solicitud se ha cambiado",onClose:()=>N(!1)}),F&&(0,n.jsx)(s.Z,{message:"La solicitud ha sido descartada",onClose:()=>M(!1)})]})}},763:function(e,t,i){"use strict";i.d(t,{Z:function(){return d}});var n=i(57437),l=i(69065),a=i(80824),s=i(66124),o=i(23269),r=i(98784),c=i(76548);function d(e){var t;return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(l.Z,{open:!0,onClose:()=>{var t;return null===(t=e.onClose)||void 0===t?void 0:t.call(e)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,n.jsx)(a.Z,{id:"alert-dialog-title",children:null!==(t=e.title)&&void 0!==t?t:"Confirmaci\xf3n"}),(0,n.jsx)(s.Z,{children:(0,n.jsx)(o.Z,{id:"alert-dialog-description",sx:{whiteSpace:"break-spaces"},children:e.message})}),(0,n.jsxs)(r.Z,{children:[(0,n.jsx)(c.Z,{onClick:()=>e.onClickedNo(),autoFocus:!0,children:"No"}),(0,n.jsx)(c.Z,{onClick:()=>e.onClickedOk(),children:"Si"})]})]})})}},46853:function(e,t,i){"use strict";i.d(t,{Z:function(){return d}});var n=i(57437),l=i(69065),a=i(80824),s=i(66124),o=i(23269),r=i(98784),c=i(76548);function d(e){var t;return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(l.Z,{open:!0,onClose:()=>e.onClose(),"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,n.jsx)(a.Z,{id:"alert-dialog-title",children:null!==(t=e.title)&&void 0!==t?t:"Error"}),(0,n.jsx)(s.Z,{children:(0,n.jsx)(o.Z,{id:"alert-dialog-description",children:e.message})}),(0,n.jsx)(r.Z,{children:(0,n.jsx)(c.Z,{onClick:()=>e.onClose(),autoFocus:!0,children:"OK"})})]})})}},20773:function(e,t,i){"use strict";i.d(t,{Z:function(){return d}});var n=i(57437),l=i(69065),a=i(80824),s=i(66124),o=i(23269),r=i(98784),c=i(76548);function d(e){var t;return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(l.Z,{open:!0,onClose:()=>e.onClose(),"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,n.jsx)(a.Z,{id:"alert-dialog-title",children:null!==(t=e.title)&&void 0!==t?t:"Info"}),(0,n.jsx)(s.Z,{children:(0,n.jsx)(o.Z,{id:"alert-dialog-description",sx:{whiteSpace:"break-spaces"},children:e.message})}),(0,n.jsx)(r.Z,{children:(0,n.jsx)(c.Z,{onClick:()=>e.onClose(),autoFocus:!0,children:"OK"})})]})})}},64917:function(e,t,i){"use strict";i.d(t,{Z:function(){return u}});var n=i(57437),l=i(69065),a=i(80824),s=i(66124),o=i(23269),r=i(40468),c=i(98784),d=i(76548);function u(e){var t;return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(l.Z,{open:!0,onClose:()=>e.onClose(),"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,n.jsx)(a.Z,{id:"alert-dialog-title",children:null!==(t=e.title)&&void 0!==t?t:"Info"}),(0,n.jsxs)(s.Z,{children:[(0,n.jsx)(o.Z,{id:"alert-dialog-description",children:e.message}),(0,n.jsx)("br",{}),e.isLoading&&(0,n.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:(0,n.jsx)(r.Z,{})})]}),(0,n.jsx)(c.Z,{children:!e.isLoading&&(0,n.jsx)(d.Z,{onClick:()=>e.onClose(),autoFocus:!0,children:"OK"})})]})})}},97231:function(e,t,i){"use strict";i.d(t,{Z:function(){return j}});var n=i(57437);let l=e=>{switch(e){case"SOLICITADO":return 0;case"EN_REVISION":return 1;case"RECHAZADO":case"APROBADO":return 2;default:throw Error("Could not evaulate contact request for state: "+e)}};var a=i(26327),s=i(34990),o=i(94696),r=i(32529),c=i(80511),d=i(96575),u=i(29889),h=i(55734),x=i(91326),m=i(14595),g=i(76548);function j(e){let t=e.solicitud,i=e.club,j=t.estadoMasReciente,b=l(j.estado);return(0,n.jsx)(s.Z,{sx:{maxWidth:600,width:"90%"},children:(0,n.jsxs)(o.Z,{children:[(0,n.jsxs)(r.Z,{direction:"row",alignItems:"center",gap:1,justifyContent:"center",children:[(0,n.jsx)(c.Z,{variant:"body1",sx:{textAlign:"center"},children:"Atleta:"}),(0,n.jsxs)(c.Z,{variant:"body2",sx:{textAlign:"center"},children:[t.atleta.nombre," ",t.atleta.apellido," (ID: ",t.atleta.id,")"]})]}),i&&(0,n.jsxs)(r.Z,{direction:"row",alignItems:"center",gap:1,justifyContent:"center",children:[(0,n.jsx)(c.Z,{variant:"body1",sx:{textAlign:"center"},children:"Club:"}),(0,n.jsxs)(c.Z,{variant:"body2",sx:{textAlign:"center"},children:[i.nombre," (ID: ",i.id,")"]})]}),(0,n.jsxs)(d.Z,{activeStep:b,children:[(0,n.jsx)(u.Z,{completed:b>=0,children:(0,n.jsx)(h.Z,{optional:0===b?"".concat((0,a.yu)(j.fecha)):"",children:"Solicitado"})},"SOLICITADO"),(0,n.jsx)(u.Z,{completed:b>=1,children:(0,n.jsx)(h.Z,{optional:1===b?"".concat((0,a.yu)(j.fecha)):"",children:"En revisi\xf3n"})},"EN_REVISION"),"RECHAZADO"!==j.estado&&(0,n.jsx)(u.Z,{completed:b>=2,children:(0,n.jsx)(h.Z,{optional:2===b?"".concat((0,a.yu)(j.fecha)):"",children:"Aprobado"})},"APROBADO"),"RECHAZADO"===j.estado&&(0,n.jsx)(u.Z,{completed:b>=2,children:(0,n.jsx)(h.Z,{optional:2===b?"".concat((0,a.yu)(j.fecha)):"",children:"Rechazado"})},"RECHAZADO")]}),i&&(0,n.jsxs)(x.Z,{sx:{mt:4},children:[(0,n.jsx)(m.Z,{}),(0,n.jsxs)(r.Z,{direction:"row",gap:4,sx:{mt:2},justifyContent:"end",children:["SOLICITADO"===j.estado&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(g.Z,{onClick:()=>{var t;return null===(t=e.onReject)||void 0===t?void 0:t.call(e)},variant:"outlined",children:"Rechazar"}),(0,n.jsx)(g.Z,{onClick:()=>{var t;return null===(t=e.onReview)||void 0===t?void 0:t.call(e)},variant:"contained",children:"Revisar"})]}),"EN_REVISION"===j.estado&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(g.Z,{onClick:()=>{var t;return null===(t=e.onReject)||void 0===t?void 0:t.call(e)},variant:"outlined",children:"Rechazar"}),(0,n.jsx)(g.Z,{onClick:()=>{var t;return null===(t=e.onAccept)||void 0===t?void 0:t.call(e)},variant:"contained",children:"Aprobar"})]}),("APROBADO"===j.estado||"RECHAZADO"===j.estado)&&(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(g.Z,{onClick:()=>{var t;return null===(t=e.onDismiss)||void 0===t?void 0:t.call(e)},variant:"contained",children:"Descartar"})})]})]})]})})}},37682:function(e,t,i){"use strict";i.d(t,{Z:function(){return g}});var n=i(57437),l=i(91326),a=i(32184),s=i(7547),o=i(47905),r=i(57300),c=i(14595),d=i(71733),u=i(79806),h=i(60335),x=i(85465),m=i(2265);function g(e){var t;let[i,g]=m.useState(!1),j=e=>()=>{g(e)},b=(t,i)=>{var n,l;return t===(null===(n=e.activeItem)||void 0===n?void 0:n.sectionTitle)&&i===(null===(l=e.activeItem)||void 0===l?void 0:l.subItem)?"primary.light":"transparent"},Z=(0,n.jsx)(l.Z,{sx:{width:250},role:"presentation",onClick:j(!1),children:null===(t=e.navItems)||void 0===t?void 0:t.map(t=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a.Z,{children:(0,n.jsx)(s.ZP,{disablePadding:!0,children:(0,n.jsx)(o.Z,{sx:{textAlign:"center"},primary:t.sectionTitle})},t.sectionTitle)}),(0,n.jsx)(a.Z,{children:t.subItems.map(i=>(0,n.jsx)(s.ZP,{disablePadding:!0,sx:{backgroundColor:b(t.sectionTitle,i)},children:(0,n.jsx)(r.Z,{onClick:()=>{var n;return null===(n=e.onNavItemClick)||void 0===n?void 0:n.call(e,t.sectionTitle,i)},children:(0,n.jsx)(o.Z,{primary:i})})},i))}),(0,n.jsx)(c.Z,{})]}))});return(0,n.jsx)(l.Z,{sx:{flexGrow:1,margin:"-8px"},children:(0,n.jsx)(d.Z,{position:"static",children:(0,n.jsxs)(u.Z,{children:[(0,n.jsx)(h.Z,{edge:"start",color:"inherit","aria-label":"menu",sx:{mr:2},onClick:j(!0),children:"☰ Sports Scout"}),(0,n.jsx)(x.ZP,{open:i,onClose:j(!1),children:Z})]})})})}},3402:function(e,t,i){"use strict";i.d(t,{Y:function(){return n}});class n{buildNavItems(e){let t=[];return e.topBarSections.forEach(e=>{let i=e.subSections.map(e=>e.subSectionTitle),n={sectionTitle:e.sectionTitle,subItems:i};t.push(n)}),t}getActiveSubItem(e,t){for(let i=0;i<e.topBarSections.length;i++)for(let n=0;n<e.topBarSections[i].subSections.length;n++){let l=e.topBarSections[i].subSections[n];if(l.path===t)return{sectionTitle:e.topBarSections[i].sectionTitle,subItem:l.subSectionTitle}}return null}processNavItemClick(e,t,i){for(let n=0;n<e.topBarSections.length;n++){let l=e.topBarSections[n];for(let a=0;a<l.subSections.length;a++){let s=e.topBarSections[n].subSections[a];l.sectionTitle===t.sectionTitle&&s.subSectionTitle===t.subItem&&(s.triggerAction&&s.triggerAction(),s.path&&i.push(s.path))}}}}},94093:function(e,t,i){"use strict";i.d(t,{Z:function(){return c}});var n=i(57437),l=i(16463),a=i(2265),s=i(37682),o=i(3402),r=i(78864);function c(){let e=(0,a.useMemo)(()=>(0,r.o)().getAccountManagerService(),[]),t=(0,a.useMemo)(()=>new o.Y,[]),i=(0,l.useRouter)(),c=(0,l.usePathname)(),d={topBarSections:[{sectionTitle:"Clubes",subSections:[{subSectionTitle:"Ver",path:"/administrador/clubes"},{subSectionTitle:"Solicitudes de Contacto",path:"/administrador/clubes/solicitudes-de-contacto"},{subSectionTitle:"Ver Formularios",path:"/administrador/clubes/formularios"}]},{sectionTitle:"Tutores",subSections:[{subSectionTitle:"Ver",path:"/administrador/tutores"},{subSectionTitle:"Ver Formularios",path:"/administrador/tutores/formularios"}]},{sectionTitle:"Atletas",subSections:[{subSectionTitle:"Filtrar",path:"/administrador/atletas/filtrar"},{subSectionTitle:"Ver",path:"/administrador/atletas"}]},{sectionTitle:"Otros",subSections:[{subSectionTitle:"Editar cuentas Administradoras",path:"/administrador/cuentas"},{subSectionTitle:"Salir",triggerAction:()=>{e.logout().then(()=>{i.replace("/")}).catch(e=>{window.alert(e.message)})}}]}]};return(0,n.jsx)(s.Z,{navItems:t.buildNavItems(d),activeItem:t.getActiveSubItem(d,c),onNavItemClick:(e,n)=>{t.processNavItemClick(d,{sectionTitle:e,subItem:n},i)}})}},53255:function(e,t,i){"use strict";function n(e){e.sort((e,t)=>null===e.estadoMasReciente&&null===t.estadoMasReciente?0:null===e.estadoMasReciente?1:null===t.estadoMasReciente?-1:e.estadoMasReciente.fecha.getTime()-t.estadoMasReciente.fecha.getTime())}i.d(t,{X:function(){return n}})},26327:function(e,t,i){"use strict";i.d(t,{jM:function(){return a},np:function(){return s},yu:function(){return l}});let n=e=>(e instanceof Date||(e=new Date(e)),e);function l(e){let t=String((e=n(e)).getDate()).padStart(2,"0"),i=String(e.getMonth()+1).padStart(2,"0"),l=e.getFullYear();return"".concat(t,"/").concat(i,"/").concat(l)}function a(e){e=n(e);let t=new Date,i=t.getFullYear()-e.getFullYear(),l=new Date(t.getFullYear(),e.getMonth(),e.getDate());return t<l&&i--,i}function s(e){e=n(e);let t=new Date;return t.setHours(0,0,0,0),e.setHours(0,0,0,0),Math.floor((t.getTime()-e.getTime())/864e5)}}},function(e){e.O(0,[6953,4069,4883,8704,508,2529,3653,8864,2971,7023,1744],function(){return e(e.s=6379)}),_N_E=e.O()}]);