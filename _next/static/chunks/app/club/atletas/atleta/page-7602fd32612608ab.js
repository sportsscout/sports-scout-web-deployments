(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2501],{94513:function(e,t,l){Promise.resolve().then(l.bind(l,20174))},20174:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return g}});var a=l(57437),o=l(763),n=l(46853),i=l(20773),s=l(53165),c=l(45346),r=l(78864),u=l(40468),d=l(16463),h=l(2265);function g(){let e=(0,h.useMemo)(()=>(0,r.o)(),[]),t=(0,h.useMemo)(()=>e.getAtletaService(),[]),l=(0,h.useMemo)(()=>e.getClubFollowAthleteService(),[]),g=(0,h.useMemo)(()=>e.getClubAthleteContactService(),[]),[S,C]=(0,h.useState)(!1),[m,b]=(0,h.useState)(null),[v,f]=(0,h.useState)(null),[p,x]=(0,h.useState)(null),[j,k]=(0,h.useState)(null),[O,Z]=(0,h.useState)(!1),[N,I]=(0,h.useState)(!1),[w,A]=(0,h.useState)(null),[L,F]=(0,h.useState)("LOADING"),y=(0,d.useRouter)();(0,h.useEffect)(()=>{let e=new URLSearchParams(new URL(window.location.href).search).get("id");C(!0),t.getAtleta(e).then(e=>{if(null===e)throw Error("Atleta no encontrado.");b(e.atleta),f(e.tutorDelAtleta)}).catch(e=>{x(e.message)}).finally(()=>{C(!1)}),l.isFollowing(e).then(e=>{e?F("FOLLOWING"):F("NOT_FOLLOWING")}).catch(e=>{x(e.message)}),g.hasContactRequest(e.toString()).then(e=>{A(e)}).catch(e=>{x(e.message)})},[]);let T=()=>{F("LOADING"),(async()=>{try{"FOLLOWING"===L?(await l.stopFollowing(null==m?void 0:m.id),F("NOT_FOLLOWING"),k("Has dejado de seguir a "+(null==m?void 0:m.nombre)+" "+(null==m?void 0:m.apellido))):"NOT_FOLLOWING"===L&&(await l.follow(null==m?void 0:m.id),F("FOLLOWING"))}catch(e){x(e.message)}})()},_=()=>{A(null),I(!1),Z(!1),(async()=>{!0===w&&g.dismissContactRequest(m.id.toString()).then(()=>{A(!1),k("Se ha cancelado la solicitud de contacto.")}).catch(e=>{x(e.message)}),!1===w&&g.makeContactRequest(m.id.toString()).then(()=>{A(!0),k("La solicitud ha sido realizada. Aguarde a que los administradores la aprueben. Recibir\xe1 las notificaciones por email")}).catch(e=>{x(e.message)})})()};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.Z,{}),(0,a.jsx)("h1",{style:{textAlign:"center"},children:"Atleta"}),S&&(0,a.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:(0,a.jsx)(u.Z,{})}),m&&(0,a.jsx)(s.Z,{atleta:m,tutor:v,onError:e=>x(e.message),onTestClicked:e=>{y.push("/club/atletas/atleta/tests/test/?atletaId=".concat(m.id,"&testId=").concat(e.id))},vistaDeClub:!0,clubSiguiendoAtleta:L,clubSolicitoContacto:w,onClickedButtonSiguiendo:()=>T(),onClickedButtonCancelarSolicitudDeContacto:()=>I(!0),onClickedButtonSolicitadContacto:()=>Z(!0)}),p&&(0,a.jsx)(n.Z,{message:p,onClose:()=>x(null)}),j&&(0,a.jsx)(i.Z,{message:j,onClose:()=>k(null),title:"Informaci\xf3n sobre el Atleta"}),O&&(0,a.jsx)(o.Z,{message:"\xbfSeguro que desea solicitar un contacto con el atleta? Se le notificar\xe1 a los administradores, y ellos se encargar\xe1n de realizarlo. Podr\xe1 seguir las etapas del proceso en su correo electr\xf3nico, o ver el estado llendo al men\xfa 'Atletas' en la secci\xf3n 'Solicitudes de Contacto'.",onClose:()=>Z(!1),onClickedNo:()=>Z(!1),onClickedOk:()=>_()}),N&&(0,a.jsx)(o.Z,{message:"\xbfSeguro que desea cancelar el contacto con el atleta? Si quiere volver a realizar el contacto deber\xe1 inicar de nuevo con todo el proceso.",onClose:()=>I(!1),onClickedNo:()=>I(!1),onClickedOk:()=>_()})]})}},763:function(e,t,l){"use strict";l.d(t,{Z:function(){return u}});var a=l(57437),o=l(69065),n=l(80824),i=l(66124),s=l(23269),c=l(98784),r=l(76548);function u(e){var t;return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(o.Z,{open:!0,onClose:()=>{var t;return null===(t=e.onClose)||void 0===t?void 0:t.call(e)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,a.jsx)(n.Z,{id:"alert-dialog-title",children:null!==(t=e.title)&&void 0!==t?t:"Confirmaci\xf3n"}),(0,a.jsx)(i.Z,{children:(0,a.jsx)(s.Z,{id:"alert-dialog-description",sx:{whiteSpace:"break-spaces"},children:e.message})}),(0,a.jsxs)(c.Z,{children:[(0,a.jsx)(r.Z,{onClick:()=>e.onClickedNo(),autoFocus:!0,children:"No"}),(0,a.jsx)(r.Z,{onClick:()=>e.onClickedOk(),children:"Si"})]})]})})}},20773:function(e,t,l){"use strict";l.d(t,{Z:function(){return u}});var a=l(57437),o=l(69065),n=l(80824),i=l(66124),s=l(23269),c=l(98784),r=l(76548);function u(e){var t;return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(o.Z,{open:!0,onClose:()=>e.onClose(),"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,a.jsx)(n.Z,{id:"alert-dialog-title",children:null!==(t=e.title)&&void 0!==t?t:"Info"}),(0,a.jsx)(i.Z,{children:(0,a.jsx)(s.Z,{id:"alert-dialog-description",sx:{whiteSpace:"break-spaces"},children:e.message})}),(0,a.jsx)(c.Z,{children:(0,a.jsx)(r.Z,{onClick:()=>e.onClose(),autoFocus:!0,children:"OK"})})]})})}},45346:function(e,t,l){"use strict";l.d(t,{Z:function(){return r}});var a=l(57437),o=l(16463),n=l(2265),i=l(37682),s=l(3402),c=l(78864);function r(){let e=(0,n.useMemo)(()=>(0,c.o)().getAccountManagerService(),[]),t=(0,n.useMemo)(()=>new s.Y,[]),l=(0,o.useRouter)(),r=(0,o.usePathname)(),u={topBarSections:[{sectionTitle:"Atletas",subSections:[{subSectionTitle:"Buscar",path:"/club/atletas/filtrar"},{subSectionTitle:"Novedades",path:"/club/atletas/novedades"},{subSectionTitle:"Siguiendo",path:"/club/atletas/siguiendo"},{subSectionTitle:"Solicitudes de Contacto",path:"/club/atletas/contactos"}]},{sectionTitle:"Otros",subSections:[{subSectionTitle:"Configuraci\xf3n de la Cuenta",path:"/club/cuenta"},{subSectionTitle:"Salir",triggerAction:()=>{e.logout().then(()=>{l.replace("/")}).catch(e=>{window.alert(e.message)})}}]}]};return(0,a.jsx)(i.Z,{navItems:t.buildNavItems(u),activeItem:t.getActiveSubItem(u,r),onNavItemClick:(e,a)=>{t.processNavItemClick(u,{sectionTitle:e,subItem:a},l)}})}}},function(e){e.O(0,[6953,4069,4883,8704,508,2529,8872,8864,1543,2971,7023,1744],function(){return e(e.s=94513)}),_N_E=e.O()}]);